import{j as R,r as O,R as F,a as B}from"./vendor.551c6e3d.js";const D=function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function f(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=f(t);fetch(t.href,n)}};D();/**
 * @preserve
 * Copyright 2015 Igor Bezkrovny
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 */function L(i,h,f=8,o=.01,t=.03,n=!0,s=8){if(i.width!==h.width||i.height!==h.height)throw new Error("Images have different sizes!");var u=(1<<s)-1,w=Math.pow(o*u,2),p=Math.pow(t*u,2),r=0,c=0,a=0;function m(l,v,e,d){var g,I,b;g=I=b=0;for(var y=0;y<l.length;y++)I+=Math.pow(l[y]-e,2),b+=Math.pow(v[y]-d,2),g+=(l[y]-e)*(v[y]-d);var j=l.length-1;I/=j,b/=j,g/=j;var k=(2*e*d+w)*(2*g+p),q=(Math.pow(e,2)+Math.pow(d,2)+w)*(I+b+p);c+=k/q,a+=(2*g+p)/(I+b+p),r++}return x._iterate(i,h,f,n,m),{ssim:c/r,mcs:a/r}}var x;(i=>{function h(t,n,s,u,w){for(var p=t.width,r=t.height,c=0;c<r;c+=s)for(var a=0;a<p;a+=s){var m=Math.min(s,p-a),l=Math.min(s,r-c),v=f(t,a,c,m,l,u),e=f(n,a,c,m,l,u),d=o(v),g=o(e);w(v,e,d,g)}}i._iterate=h;function f(t,n,s,u,w,p){for(var r=t.data,c=new Float32Array(new ArrayBuffer(u*w*4)),a=0,m=s+w,l=s;l<m;l++){var v=l*t.width,e=(v+n)*t.channels,d=(v+n+u)*t.channels;switch(t.channels){case 1:for(;e<d;)c[a++]=r[e++];break;case 2:for(;e<d;)c[a++]=r[e++]*(r[e++]/255);break;case 3:if(p)for(;e<d;)c[a++]=r[e++]*.212655+r[e++]*.715158+r[e++]*.072187;else for(;e<d;)c[a++]=r[e++]+r[e++]+r[e++];break;case 4:if(p)for(;e<d;)c[a++]=(r[e++]*.212655+r[e++]*.715158+r[e++]*.072187)*(r[e++]/255);else for(;e<d;)c[a++]=(r[e++]+r[e++]+r[e++])*(r[e++]/255);break}}return c}function o(t){for(var n=0,s=0;s<t.length;s++)n+=t[s];return n/t.length}})(x||(x={}));const M=R.exports.jsx,S=R.exports.jsxs;function _(i,h){return Math.floor(Math.random()*(h-i+1))+i}const A=`face-${_(1,20)}.jpg`,E=`face-${_(1,20)}.jpg`;function W(){const[i,h]=O.exports.useState();return O.exports.useEffect(()=>{Promise.all([P(A),P(E)]).then(([f,o])=>{h(L(f,o))})},[]),S("div",{className:"App",children:[M("img",{width:200,src:A}),M("img",{width:200,src:E}),M("h2",{children:"Similarity result"}),M("pre",{children:JSON.stringify(i)})]})}const N=1024,$=1024;function P(i){return new Promise(h=>{const f=new Image;f.onload=function(){const o=document.createElement("canvas");o.width=N,o.height=$;const t=o.getContext("2d");t.drawImage(f,0,0,N,o.height);const n=t.getImageData(0,0,o.width,o.height);h({width:o.width,height:o.height,data:n.data,channels:4,canvas:o})},f.src=i})}F.render(M(B.StrictMode,{children:M(W,{})}),document.getElementById("root"));
