var R=Object.defineProperty,B=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var _=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&_(e,n,t[n]);if(E)for(var n of E(t))H.call(t,n)&&_(e,n,t[n]);return e},q=(e,t)=>B(e,T(t));import{j,r as z,a as U,n as Z,u as G,c as K,b as $}from"./vendor.abf21b5d.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};J();const m=1024,Q=20,f=j.exports.jsx,A=j.exports.jsxs,X=j.exports.Fragment;function Y({image:e,scale:t=1}){const n=z.exports.useRef(null);return z.exports.useEffect(()=>{const c=n.current;if(c===null)return;const o=c.getContext("2d");o.scale(t,t),o.drawImage(e.canvas,0,0),o.resetTransform()},[n]),f("canvas",{ref:n,width:m*t,height:m*t})}const V=["aardvark","abacus","abundance","ache","acupuncture","airbrush","alien","anagram","angle","amazing","ankle","alphabet","antenna","aqua","asphalt","bacon","banana","bangles","banjo","bankrupt","bar","barracuda","basket","beluga","binder","birthday","bisect","blizzard","blunderbuss","boa","bog","bounce","broomstick","brought","bubble","budgie","bug","bug-a-boo","bugger","buff","burst","butter","buzz","cabana","cake","calculator","camera","candle","carnival","carpet","casino","cashew","catfish","ceiling","celery","chalet","chalk","chart","cheddar","chesterfield","chicken","chinchill","chit-chat","chocolate","chowder","coal","compass","compress","computer","conduct","contents","cookie","copper","corduroy","cow","cracker","crackle","croissant","cube","cupcake","curly","curtain","cushion","cuticle","daffodil","delicious","dictionary","dimple","ding-a-ling","disk","disco duck","dodo","dolphin","dong","donuts","dork","dracula","duct tape","effigy","egad","elastic","elephant","encasement","erosion","eyelash","fabulous","fantastic","feather","felafel","fetish","financial","finger","finite","fish","fizzle","fizzy","flame","flash","flavour","flick","flock","flour","flower","foamy","foot","fork","fritter","fudge","fungus","funny","fuse","fusion","fuzzy","garlic","gelatin","gelato","ghetto","glebe","glitter","glossy","groceries","goulashes","guacamole","gumdrop","haberdashery","hamster","happy","highlight","hippopotamus","hobbit","hold","hooligan","hydrant","icicles","idiot","implode","implosion","indeed","issue","itchy","jell-o","jewel","jump","kabob","kasai","kite","kiwi","ketchup","knob","laces","lacy","laughter","laundry","leaflet","legacy","leprechaun","lollypop","lumberjack","macadamia","magenta","magic","magnanimous","mango","margarine","massimo","mechanical","medicine","meh","melon","meow","mesh","metric","microphone","minnow","mitten","mozzarella","muck","mumble","mushy","mustache","nanimo","noodle","nostril","nuggets","oatmeal","oboe","o'clock","octopus","odour","ointment","olive","optic","overhead","ox","oxen","pajamas","pancake","pansy","paper","paprika","parmesan","pasta","pattern","pecan","peek-a-boo","pen","pepper","pepperoni","peppermint","perfume","periwinkle","photograph","pie","pierce","pillow","pimple","pineapple","pistachio","plush","polish","pompom","poodle","pop","popsicle","prism","prospector","prosper","pudding","puppet","puzzle","queer","query","radish","rainbow","ribbon","rotate","salami","sandwich","saturday","saturn","saxophone","scissors","scooter","scrabbleship","scrunchie","scuffle","shadow","sickish","silicone","slippery","smash","smooch","snap","snooker","socks","soya","spaghett","sparkle","spatula","spiral","splurge","spoon","sprinkle","square","squiggle","squirrel","statistics","stuffing","sticky","sugar","sunshine","super","swirl","taffy","tangy","tape","tat","teepee","telephone","television","thinkable","tip","tof","toga","trestle","tulip","turnip","turtle","tusks","ultimate","unicycle","unique","uranus","vegetable","waddle","waffle","wallet","walnut","wagon","window","whatever","whimsical","wobbly","yellow","zap","zebra","zigzag","zip"];function O(e,t){return Math.floor(Math.random()*(t-e+1))+e}function ee(){return O(1,Q)}function te(e){return e[O(0,e.length-1)]}function ne(){return te(V)}function S(){const e=document.createElement("canvas");return e.width=m,e.height=m,e.getContext("2d")}function oe(e){return C(e,{x:0,y:0,width:m,height:m})}function C(e,{x:t,y:n,width:c,height:o}){return new Promise(a=>{const r=new Image;r.onload=()=>{const p=S();p.drawImage(r,0,0,m,m);const h=p.getImageData(t,n,c,o);a(h)},r.src=e})}function ae(e){return`face-${e}.jpg`}function re(e){const t=S(),n=e.length,c=se(n),o=c.map((a,r)=>C(ae(e[r]),a));return Promise.all(o).then(a=>{for(let r=0;r<n;r++){const{y:p,x:h}=c[r];t.putImageData(a[r],h,p)}return t})}function se(e){const t=Math.sqrt(e),n=m/t;return Array.from({length:e}).map((c,o)=>{const a=Math.floor(o/t),r=o%t;return{x:a*n,y:r*n,width:n,height:n}})}function ie(e){return e.getImageData(0,0,m,m)}/**
 * @preserve
 * Copyright 2015 Igor Bezkrovny
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 */const ce=3;function le(e,t,n=8,c=.01,o=.03,a=!0,r=8){if(e.width!==t.width||e.height!==t.height)throw new Error("Images have different sizes!");const p=(1<<r)-1,h=Math.pow(c*p,2),g=Math.pow(o*p,2);let b=0,i=0,l=0;function d(y,k,w,s){let u,I,v;u=I=v=0;for(let x=0;x<y.length;x++)I+=Math.pow(y[x]-w,2),v+=Math.pow(k[x]-s,2),u+=(y[x]-w)*(k[x]-s);const M=y.length-1;I/=M,v/=M,u/=M;const F=(2*w*s+h)*(2*u+g),L=(Math.pow(w,2)+Math.pow(s,2)+h)*(I+v+g);i+=F/L,l+=(2*u+g)/(I+v+g),b++}return N._iterate(e,t,n,a,d),{ssim:i/b,mcs:l/b}}var N;(e=>{function t(o,a,r,p,h){const g=o.width,b=o.height;for(let i=0;i<b;i+=r)for(let l=0;l<g;l+=r){const d=Math.min(r,g-l),y=Math.min(r,b-i),k=n(o,l,i,d,y,p),w=n(a,l,i,d,y,p),s=c(k),u=c(w);h(k,w,s,u)}}e._iterate=t;function n(o,a,r,p,h,g,b=ce){const i=o.data,l=new Float32Array(new ArrayBuffer(p*h*4));let d=0;const y=r+h;for(let k=r;k<y;k++){const w=k*o.width;let s=(w+a)*b;const u=(w+a+p)*b;switch(b){case 1:for(;s<u;)l[d++]=i[s++];break;case 2:for(;s<u;)l[d++]=i[s++]*(i[s++]/255);break;case 3:if(g)for(;s<u;)l[d++]=i[s++]*.212655+i[s++]*.715158+i[s++]*.072187;else for(;s<u;)l[d++]=i[s++]+i[s++]+i[s++];break;case 4:if(g)for(;s<u;)l[d++]=(i[s++]*.212655+i[s++]*.715158+i[s++]*.072187)*(i[s++]/255);else for(;s<u;)l[d++]=(i[s++]+i[s++]+i[s++])*(i[s++]/255);break}}return l}function c(o){let a=0;for(let r=0;r<o.length;r++)a+=o[r];return a/o.length}})(N||(N={}));const ue=10,pe=9,he=4;function D(e){return Array.from({length:e})}function de(){return D(pe).map(ee)}function fe(e){return t=>{const n=ie(t.face);return le(n,e).ssim}}async function me(){const e=D(ue).map(de),t=await Promise.all(e.map(re));return e.map((n,c)=>({face:t[c],chromosome:n,id:Z(),name:ne()}))}function ge(e){return U(e).sortedByDescending(t=>t.rating).take(he).toArray()}function be(e){return[]}function we(e){return[]}function ye(e){return t=>t.map(n=>q(P({},n),{rating:e(n)}))}async function ke(){const e=await oe("face-2.jpg"),t=ye(fe(e)),n=t(await me()),c=ge(n),o=t(c),a=t(we()),r=be([...n,...a,...o]);return{population:n,selected:c,children:o,mutants:a,newPopulation:r}}function xe(){const e=G(()=>ke());return A(X,{children:[f("h2",{children:"Population"}),f("div",{className:"portraits",children:e.population.map(t=>f(Ie,{person:t,className:K({selected:e.selected.includes(t)})},t.id))})]})}function Ie({person:e,className:t}){return A("div",{className:"portrait "+t,children:[f(Y,{image:e.face,scale:.2}),f("span",{children:e.name}),f("span",{children:e.rating})]})}$.exports.render(f(z.exports.StrictMode,{children:f(z.exports.Suspense,{fallback:f("div",{children:"loading..."}),children:f(xe,{})})}),document.getElementById("root"));
