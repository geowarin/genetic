import{j as P,r as O,R as k,a as q}from"./vendor.551c6e3d.js";const F=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function f(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=f(t);fetch(t.href,r)}};F();/**
 * @preserve
 * Copyright 2015 Igor Bezkrovny
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 */function B(i,c,f=8,o=.01,t=.03,r=!0,s=8){if(i.width!==c.width||i.height!==c.height)throw new Error("Images have different sizes!");var u=(1<<s)-1,w=Math.pow(o*u,2),p=Math.pow(t*u,2),n=0,h=0,a=0;function m(l,v,e,d){var g,I,b;g=I=b=0;for(var y=0;y<l.length;y++)I+=Math.pow(l[y]-e,2),b+=Math.pow(v[y]-d,2),g+=(l[y]-e)*(v[y]-d);var j=l.length-1;I/=j,b/=j,g/=j;var R=(2*e*d+w)*(2*g+p),_=(Math.pow(e,2)+Math.pow(d,2)+w)*(I+b+p);h+=R/_,a+=(2*g+p)/(I+b+p),n++}return x._iterate(i,c,f,r,m),{ssim:h/n,mcs:a/n}}var x;(i=>{function c(t,r,s,u,w){for(var p=t.width,n=t.height,h=0;h<n;h+=s)for(var a=0;a<p;a+=s){var m=Math.min(s,p-a),l=Math.min(s,n-h),v=f(t,a,h,m,l,u),e=f(r,a,h,m,l,u),d=o(v),g=o(e);w(v,e,d,g)}}i._iterate=c;function f(t,r,s,u,w,p){for(var n=t.data,h=new Float32Array(new ArrayBuffer(u*w*4)),a=0,m=s+w,l=s;l<m;l++){var v=l*t.width,e=(v+r)*t.channels,d=(v+r+u)*t.channels;switch(t.channels){case 1:for(;e<d;)h[a++]=n[e++];break;case 2:for(;e<d;)h[a++]=n[e++]*(n[e++]/255);break;case 3:if(p)for(;e<d;)h[a++]=n[e++]*.212655+n[e++]*.715158+n[e++]*.072187;else for(;e<d;)h[a++]=n[e++]+n[e++]+n[e++];break;case 4:if(p)for(;e<d;)h[a++]=(n[e++]*.212655+n[e++]*.715158+n[e++]*.072187)*(n[e++]/255);else for(;e<d;)h[a++]=(n[e++]+n[e++]+n[e++])*(n[e++]/255);break}}return h}function o(t){for(var r=0,s=0;s<t.length;s++)r+=t[s];return r/t.length}})(x||(x={}));const M=P.exports.jsx,D=P.exports.jsxs;function A(i,c){return Math.floor(Math.random()*(c-i+1))+i}function L(){const i=`/face-${A(1,20)}.jpg`,c=`/face-${A(1,20)}.jpg`,[f,o]=O.exports.useState();return O.exports.useEffect(()=>{Promise.all([N(i),N(c)]).then(([t,r])=>{o(B(t,r))})},[]),D("div",{className:"App",children:[M("img",{width:200,src:i}),M("img",{width:200,src:c}),M("h2",{children:"Similarity result"}),M("pre",{children:JSON.stringify(f)})]})}const E=1024,S=1024;function N(i){return new Promise(c=>{const f=new Image;f.onload=function(){const o=document.createElement("canvas");o.width=E,o.height=S;const t=o.getContext("2d");t.drawImage(f,0,0,E,o.height);const r=t.getImageData(0,0,o.width,o.height);c({width:o.width,height:o.height,data:r.data,channels:4,canvas:o})},f.src=i})}k.render(M(q.StrictMode,{children:M(L,{})}),document.getElementById("root"));
