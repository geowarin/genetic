import{j as C,r as A,R as F,a as O}from"./vendor.551c6e3d.js";const k=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const e of n.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&a(e)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}};k();/**
 * @preserve
 * Copyright 2015 Igor Bezkrovny
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 */const q=4;function W(r,c,i=8,a=.01,t=.03,n=!0,e=8){if(r.width!==c.width||r.height!==c.height)throw new Error("Images have different sizes!");const l=(1<<e)-1,h=Math.pow(a*l,2),d=Math.pow(t*l,2);let p=0,s=0,f=0;function m(x,I,w,o){let u,M,E;u=M=E=0;for(let y=0;y<x.length;y++)M+=Math.pow(x[y]-w,2),E+=Math.pow(I[y]-o,2),u+=(x[y]-w)*(I[y]-o);const v=x.length-1;M/=v,E/=v,u/=v;const N=(2*w*o+h)*(2*u+d),S=(Math.pow(w,2)+Math.pow(o,2)+h)*(M+E+d);s+=N/S,f+=(2*u+d)/(M+E+d),p++}return R._iterate(r,c,i,n,m),{ssim:s/p,mcs:f/p}}var R;(r=>{function c(t,n,e,l,h){const d=t.width,p=t.height;for(let s=0;s<p;s+=e)for(let f=0;f<d;f+=e){const m=Math.min(e,d-f),x=Math.min(e,p-s),I=i(t,f,s,m,x,l),w=i(n,f,s,m,x,l),o=a(I),u=a(w);h(I,w,o,u)}}r._iterate=c;function i(t,n,e,l,h,d,p=q){const s=t.data,f=new Float32Array(new ArrayBuffer(l*h*4));let m=0;const x=e+h;for(let I=e;I<x;I++){const w=I*t.width;let o=(w+n)*p;const u=(w+n+l)*p;switch(p){case 1:for(;o<u;)f[m++]=s[o++];break;case 2:for(;o<u;)f[m++]=s[o++]*(s[o++]/255);break;case 3:if(d)for(;o<u;)f[m++]=s[o++]*.212655+s[o++]*.715158+s[o++]*.072187;else for(;o<u;)f[m++]=s[o++]+s[o++]+s[o++];break;case 4:if(d)for(;o<u;)f[m++]=(s[o++]*.212655+s[o++]*.715158+s[o++]*.072187)*(s[o++]/255);else for(;o<u;)f[m++]=(s[o++]+s[o++]+s[o++])*(s[o++]/255);break}}return f}function a(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n/t.length}})(R||(R={}));const g=1024,B=20;function D(){const r=document.createElement("canvas");return r.width=g,r.height=g,r.getContext("2d")}function T(r){return L(r,{x:0,y:0,width:g,height:g})}function L(r,{x:c,y:i,width:a,height:t}){return new Promise(n=>{const e=new Image;e.onload=()=>{const l=D();l.drawImage(e,0,0,g,g);const h=l.getImageData(c,i,a,t);n(h)},e.src=r})}function H(r){return`face-${r}.jpg`}function Z(r){const c=D(),i=r.length,a=G(i),t=a.map((n,e)=>L(H(r[e]),n));return Promise.all(t).then(n=>{for(let e=0;e<i;e++){const{y:l,x:h}=a[e];c.putImageData(n[e],h,l)}return c})}function G(r){const c=Math.sqrt(r),i=g/c;return Array.from({length:r}).map((a,t)=>{const n=Math.floor(t/c),e=t%c;return{x:n*i,y:e*i,width:i,height:i}})}function K(r,c){return Math.floor(Math.random()*(c-r+1))+r}function _(){return K(1,B)}function U(){return[_(),_(),_(),_()]}const b=C.exports.jsx,P=C.exports.jsxs,j=.5;function Y(){const r=A.exports.useRef(null),[c,i]=A.exports.useState();return A.exports.useEffect(()=>{const a=r.current;if(a===null)return;const t=a.getContext("2d"),n=Z(U());Promise.all([n,T("face-2.jpg")]).then(([e,l])=>{const h=e.getImageData(0,0,g,g),d=W(h,l);i(d),t.scale(j,j),t.drawImage(e.canvas,0,0),t.resetTransform()})},[r]),P("div",{children:[P("h2",{children:["Result ",c==null?void 0:c.ssim]}),b("canvas",{ref:r,width:g*j,height:g*j})]})}F.render(b(O.StrictMode,{children:b(Y,{})}),document.getElementById("root"));
